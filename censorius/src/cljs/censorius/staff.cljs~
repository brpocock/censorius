(ns censorius.staff
  (:require
   [clojure.string :as string]
   [reagent.core :as reagent :refer [atom]]
   [reagent.session :as session]
   ))

(def +bod+ [:ann-marie :lady-rae :medea :teresa :paul])
(def +div+ {:cauldron {:coord :alysia :name "Bubbling Cauldron"}
            :hearth {:coord :narissa :name "Guest Hearth"}
            :ops {:coord :mystral :name "Operations"}
            :registration {:coord :bobbi-jo :name "Registration"}
            :site {:coord :doug :name "Site"}
            :staff {:coord :sandi :name "Staff Services"}
            :bod {:name "Board of Directors' Division"}})
(def +service-leaders+ {:guardian :sqrl,
                        :drums :nicole})
(def +advisory+ [:scott-kelly :mystral])
(def +elders+ [:roger :galan :thundar :guardian-bob :arachne])
(def +departments+ {:community {:lugal :thor
                                :div :ops :name "Community Groups"}
                    :comptroller {:lugal [:ray :jade]
                                  :div :bod :name "Comptroller"}
                    :concert {:lugal :paul
                              :div :bod :name "Concert Sound & Lights"}
                    :design {:lugal [:mystral :diane :medea]
                             :div :ops :name "Design Team"}
                    :fire {:lugal :dee
                           :div :site :name "Fire Circle"}
                    :gate {:lugal :tony
                           :div :registration :name "Gate"}
                    :gungans {:lugal :perseus
                              :div :site :name "Gungans"}
                    :hearth {:lugal :cowboy
                             :div :hearth :name "Guest Hearth"}
                    :kids {:lugal :jennifer
                           :div :ops :name "Kids' Realm"}
                    :parking {:lugal :geoffrey
                              :div :registration :name "Parking"}
                    :web {:lugal :diane 
                          :div :bod :name "Photography & Web Design"}
                    :registration {:lugal :amanda
                                   :div :registration :name "Registration"}
                    :ritual {:lugal [:roger :scion]
                             :div :bod :name "Ritual"}
                    :site {:lugal [:cliff :joe]
                           :div :site :name "Site & Strike"}
                    :office {:lugal :jessica
                             :div :staff :name "Ministry of Magic"}
                    :staffing {:lugal :medea
                               :div :bod :name "Staffing"}
                    :store {:lugal :beth
                            :div :ops :name "Store Runner"}
                    :taxi {:lugal [:aurora :jim]
                           :div :hearth :name "Taxi/Trolley"}
                    :teen {:lugal nil
                           :div :ops :name "Teen Forge"}
                    :tech {:lugal :brfp
                           :div :ops :name "Technology"}
                    :trash {:lugal nil
                            :div :site :name "Trash"}
                    :tween {:lugal :soren
                            :div :ops :name "Tween Time"}
                    :vendors {:lugal :sage
                              :div :ops :name "Vendors"}
                    :workshops {:lugal :sage
                                :div :ops :name "Workshops"}})

(defn highest-job? [staff-id]
  (or (+bod+ staff-id)
      (some #(= staff-id (:coord (+div+ %))) (keys +div+))
      (some #(= staff-id (+service-leaders+ %)) (keys +service-leaders+))
      (+advisory+ staff-id)
      (+elders+ staff-id)
      (some #(= staff-id (:lugal (+departments+ %))) (keys +departments+))))

